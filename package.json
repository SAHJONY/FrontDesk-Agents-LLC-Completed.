'use client';

import { useEffect, useState } from 'react';
import Link from 'next/link';
import { 
  CheckBadgeIcon, 
  CpuChipIcon, 
  RocketLaunchIcon, 
  ShieldCheckIcon,
  SparklesIcon
} from '@heroicons/react/24/outline';
import confetti from 'canvas-confetti';

export default function SuccessPage() {
  const [status, setStatus] = useState('initializing');

  useEffect(() => {
    // 1. Trigger Elite Celebration
    const duration = 5 * 1000;
    const animationEnd = Date.now() + duration;
    const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

    const randomInRange = (min: number, max: number) => Math.random() * (max - min) + min;

    const interval: any = setInterval(function() {
      const timeLeft = animationEnd - Date.now();
      if (timeLeft <= 0) return clearInterval(interval);
      const particleCount = 50 * (timeLeft / duration);
      confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
      confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
    }, 250);

    // 2. Simulate Neural Provisioning
    const timers = [
      setTimeout(() => setStatus('neural_core_active'), 1500),
      setTimeout(() => setStatus('agents_deployed'), 3500),
      setTimeout(() => setStatus('ready'), 5000),
    ];

    return () => timers.forEach(clearTimeout);
  }, []);

  return (
    <div className="min-h-screen bg-[#000814] text-white flex items-center justify-center p-6 selection:bg-cyan-500/30 font-sans antialiased overflow-hidden">
      
      {/* Background Radial Glow */}
      <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 via-transparent to-transparent opacity-50" />

      <div className="max-w-2xl w-full relative z-10 text-center">
        
        {/* Animated Icon Header */}
        <div className="mb-12 relative inline-block">
          <div className="w-24 h-24 bg-gradient-to-br from-cyan-400 to-cyan-600 rounded-3xl flex items-center justify-center shadow-[0_0_50px_rgba(6,182,212,0.4)] animate-pulse">
            <RocketLaunchIcon className="w-12 h-12 text-[#000814]" />
          </div>
          <div className="absolute -top-2 -right-2">
            <SparklesIcon className="w-8 h-8 text-cyan-400 animate-bounce" />
          </div>
        </div>

        <h1 className="text-5xl md:text-7xl font-black italic uppercase tracking-tighter mb-6 leading-none">
          Founder <span className="text-cyan-500">Verified.</span>
        </h1>

        <p className="text-slate-400 text-lg md:text-xl font-medium mb-12 uppercase tracking-widest leading-relaxed">
          The FrontDesk Neural Core is provisioning your <br />
          <span className="text-white font-black">15 Autonomous Units.</span>
        </p>

        {/* Neural Provisioning Checklist */}
        <div className="bg-white/5 border border-white/10 rounded-[40px] p-10 mb-12 text-left space-y-6 backdrop-blur-xl">
          <div className="flex items-center gap-4 group">
            <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${status !== 'initializing' ? 'bg-cyan-500 border-cyan-500 scale-110' : 'border-slate-700'}`}>
              <CheckBadgeIcon className={`w-4 h-4 text-[#000814] ${status === 'initializing' ? 'opacity-0' : 'opacity-100'}`} />
            </div>
            <span className={`text-[10px] font-black uppercase tracking-[0.3em] ${status !== 'initializing' ? 'text-white' : 'text-slate-600'}`}>
              Subscription Authenticated ($0 Setup Fee Applied)
            </span>
          </div>

          <div className="flex items-center gap-4">
            <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${status === 'agents_deployed' || status === 'ready' ? 'bg-cyan-500 border-cyan-500 scale-110' : 'border-slate-700 animate-spin-slow'}`}>
              <CpuChipIcon className={`w-4 h-4 text-[#000814] ${status === 'agents_deployed' || status === 'ready' ? 'opacity-100' : 'opacity-0'}`} />
            </div>
            <span className={`text-[10px] font-black uppercase tracking-[0.3em] ${status === 'agents_deployed' || status === 'ready' ? 'text-white' : 'text-slate-600'}`}>
              Allocating 500-1500 Neural Minutes
            </span>
          </div>

          <div className="flex items-center gap-4">
            <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${status === 'ready' ? 'bg-cyan-500 border-cyan-500 scale-110' : 'border-slate-700'}`}>
              <ShieldCheckIcon className={`w-4 h-4 text-[#000814] ${status === 'ready' ? 'opacity-100' : 'opacity-0'}`} />
            </div>
            <span className={`text-[10px] font-black uppercase tracking-[0.3em] ${status === 'ready' ? 'text-white' : 'text-slate-600'}`}>
              Global Kill-Switch & Dashboard Encrypted
            </span>
          </div>
        </div>

        {/* Call to Action */}
        <div className={`transition-all duration-1000 ${status === 'ready' ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}>
          <Link href="/dashboard">
            <button className="px-12 py-6 bg-white text-[#000814] rounded-2xl font-black transition-all hover:bg-cyan-500 text-[12px] uppercase tracking-widest shadow-[0_0_40px_rgba(255,255,255,0.1)]">
              Enter My Command Center
            </button>
          </Link>
          <p className="mt-8 text-[9px] font-bold text-slate-500 uppercase tracking-[0.4em]">
            FrontDesk Agents LLC â€¢ Intelligence Architecture v4.2.0
          </p>
        </div>

      </div>
    </div>
  );
}

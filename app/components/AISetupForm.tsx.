// app/components/AISetupForm.tsx
"use client";

import { useState, FormEvent } from "react";

type Step = 1 | 2 | 3;

export default function AISetupForm() {
  const [step, setStep] = useState<Step>(1);

  const handleSubmit = (e: FormEvent) => {
    e.preventDefault();
    if (step < 3) {
      setStep((s) => (s + 1) as Step);
    } else {
      alert("Guardado (demo). En producción esto enviará los datos al backend.");
    }
  };

  return (
    <form
      onSubmit={handleSubmit}
      className="space-y-6 max-w-2xl mx-auto bg-slate-900/70 border border-slate-800 rounded-xl p-5 sm:p-6 shadow"
    >
      <header className="space-y-1">
        <p className="text-xs uppercase tracking-[0.2em] text-sky-400">
          Setup · Paso {step} de 3
        </p>
        <h1 className="text-xl font-semibold">Configurar agentes de IA</h1>
        <p className="text-sm text-slate-400">
          Este formulario es solo UI (demo). Más adelante lo conectamos al
          backend real para guardar tus claves y números.
        </p>
      </header>

      {step === 1 && (
        <div className="space-y-4">
          <h2 className="text-sm font-medium text-slate-100">
            1. Números telefónicos (Bland / Twilio)
          </h2>
          <div className="space-y-3 text-sm">
            <label className="block">
              <span className="text-slate-300">Número principal de negocio</span>
              <input
                className="mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-1 focus:ring-sky-500"
                placeholder="+1 305 555 5555"
              />
            </label>
            <label className="block">
              <span className="text-slate-300">Proveedor</span>
              <select className="mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-1 focus:ring-sky-500">
                <option>Bland.ai (recomendado)</option>
                <option>Twilio</option>
                <option>Otro / aún no definido</option>
              </select>
            </label>
          </div>
        </div>
      )}

      {step === 2 && (
        <div className="space-y-4">
          <h2 className="text-sm font-medium text-slate-100">
            2. CRM / Base de datos de leads
          </h2>
          <div className="space-y-3 text-sm">
            <label className="block">
              <span className="text-slate-300">Herramienta principal</span>
              <select className="mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-1 focus:ring-sky-500">
                <option>Airtable</option>
                <option>HubSpot</option>
                <option>Otro</option>
              </select>
            </label>
            <label className="block">
              <span className="text-slate-300">Nombre de la tabla / pipeline</span>
              <input
                className="mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-1 focus:ring-sky-500"
                placeholder="FrontDesk Prospects / Leads"
              />
            </label>
          </div>
        </div>
      )}

      {step === 3 && (
        <div className="space-y-4">
          <h2 className="text-sm font-medium text-slate-100">
            3. Reglas básicas del agente
          </h2>
          <div className="space-y-3 text-sm">
            <label className="block">
              <span className="text-slate-300">Horario de atención</span>
              <input
                className="mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-1 focus:ring-sky-500"
                placeholder="24/7, o L-V 9am–6pm, etc."
              />
            </label>
            <label className="block">
              <span className="text-slate-300">Objetivo principal</span>
              <textarea
                className="mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-1 focus:ring-sky-500"
                rows={3}
                placeholder="Ej: responder preguntas frecuentes y agendar citas en el calendario."
              />
            </label>
          </div>
        </div>
      )}

      {/* Buttons */}
      <div className="flex items-center justify-between pt-2">
        <button
          type="button"
          onClick={() => setStep((s) => (s > 1 ? ((s - 1) as Step) : s))}
          className="text-xs text-slate-400 hover:text-slate-200"
          disabled={step === 1}
        >
          ← Atrás
        </button>

        <button
          type="submit"
          className="inline-flex items-center rounded-lg bg-sky-500 px-4 py-2 text-xs font-medium text-white hover:bg-sky-400 transition"
        >
          {step < 3 ? "Continuar" : "Guardar configuración (demo)"}
        </button>
      </div>
    </form>
  );
}
